“최소한의 자원으로 최대한의 효율을 내자 !”

## 배경

- 자바 기반의 표준 배치 기술의 부재
  - 배치 처리에서 요구하는 재사용 가능한 자바 기반 배치 아키텍처 표준의 필요성이 대두
    - 표준 : 표준 IO, JDBC, … JSR
  - 일괄 처리를 위한 자바 표준이 없으니, Spring Batch 가 만들어지게됨

## 이상적인 배치를 위한 조건

- 배치 프로세스를 주기적으로 커밋
  - 만약에, 대용량 데이터를 한번에 처리해야한다면??? 너무 큰 리소스가 필요하게된다.
  - 주기적으로 커밋하기 위한 전략이 필요함
- 동시 다발적인 여러개의 Job의 배치 처리, 대용량 병렬 처리
  - Job끼리 독립적이고, 영향이 없어야하고, 다량의 Job, 용량이 큰 데이터는 병렬적(멀티 스레드)로 처리해야한다.
- 만약에 실패/중단이 된다면, 수동/스케쥴러에 의한 재시작이 되어야함
- 의존관계가 있는 step 여러개를 순차적으로 처리해야한다.
  - 한 개의 Job에는 여러개의 step이 있다. 이걸 순차적으로 처리해야함
- 조건적 Flow 구성을 통한 체계적이고,  유연한 배치 모델이 구성되어야함
  - A일 경우와 B일 경우의 flow를 다르게 할 수 있어야한다.
- 반복, 재시도, Skip 을 처리해야함
  - 잠깐의 네트웤 장애 → 이 잠깐 동안의 장애는 중단 시켜 버리는게 아니라 재시도를 도전해봐야함

---

## Intro

- Spring Batch는 대량의 데이터 처리를 위한 경량화된 프레임워크
- 반복적인 작업을 수행하는 일괄 처리(Batch Processing) 작업을 효율적으로 처리할 수 있는 기능 제공
- 대용량 데이터 처리나 주기적인 업무 처리 등을 효율적으로 처리
- 대용량 데이터 처리에 적합한 분산 방식의 처리를 지원

## Spring Batch 의 특징

- 대용량 데이터 처리

  Spring Batch는 방대한 양의 데이터를 처리할 수 있다. 데이터 처리 작업을 분산 처리할 수 있어서, 대용량 데이터 처리에 적합하다.

  - 대부분 처리량이 많은 일을 일괄 처리해야 효율이 높아지므로, 주로 **처리량이 많고 비실시간성의 일 처리**에 사용함
- 트랜잭션 관리

  Spring Batch는 트랜잭션 관리를 지원한다. 데이터 처리 중 실패한 작업은 롤백하여 데이터 일관성을 유지할 수 있다.

- 재시도 기능

  Spring Batch는 작업 중 실패한 경우, 작업을 재시도할 수 있는 기능을 제공한다. 또한, 재시도 횟수를 설정할 수 있다.

- 사용자와의 상호작용(사용자의 행동에 따라 호출되는 API)으로 실행되기 보단, **Scheduler, jenkins 등의 시스템에 의해 실행**된다.
  - 작업이 간단하고 주기적으로 실행되는 경우 내장 스케줄러가 적합하며, 복잡한 워크플로우와 의존성이 있는 경우 Jenkins가 더 나을 수 있음

## Spring Batch의 단위

- 스프링 배치의 실행 단위 :
  - Jop : 배치의 실행 단위
  - Step : Job의 세부 실행 단위, N개가 등록되어 실행
- 스프링 배치의 최소 단위 :
  - 비교적 간단한 작업(Tasklet) 단위 처리
  - 대량 묶음(Chunk) 단위 처리

## 핵심 패턴

- Read : 데이터베이그, 파일, 큐 에서 다량의 데이터 조회
- Process : 특정 방법으로 데이터 가공
- Write : 데이터를 수정된 양식으로 다시 저장

