## 일괄 처리 (Batch processing)

- 개별적으로 어떤 요청이 있을 때마다 실시간으로 통신하는 것이 아닌, 한꺼번에 일괄적으로 대량의 건을 처리 하는 것

## 배치 처리가 쓰이는 곳

- 주간, 월간 청구 / 급여 / 정산
- 특정한 조건의 사람들에게 무언갈 지급하는, 안내하는 행위
- 대량의 데이터를 주기적으로 받아와서, 가공해서 저장하는 등의 행위

## 배치 처리와 배치 프로그램을 사용 하는 이유

사람이 대용량의 데이터를 반복적인 태스킹을 한다면? 정말 비효율적

스케쥴러를 이용해서 만들어볼 수 있지 않을까?

- 만약에 중간에 중지하거나 실패하면….
    - 어디서부터 다시 해야하는지 찾아봐야됨
    - 아니면.. 처음부터..? 😱
- 그럼 모든 프로젝트에서 배치처리를 구현하기 위해,
  똑같은 지원 사양들(중지됐을 때 처리 방법, 어떻게 배치 처리를 할 지에 대한 프레임 등) 을 매번 구현해줘야한다.

→ 그렇다면 !

배치 처리를 위한 라이브러리/프레임워크를 통해 사용하는게 좋음

## 배치의 특징

1. 대량의 데이터를 처리한다. (읽기, 가공, 저장 등)
2. 일괄적으로 처리한다. (일련의 작업을 자동으로 순차적으로 또는 동시에 처리)
3. 특정 시간 (매일 아침 8시, 매월 말일 등)        ← 하지만 이건 스케쥴러가 할 일

## 배치 처리의 예시
```
💡 정보통신서비스 제공자들은 이용자가 정보통신서비스를 법 제39조의6제1항의 기간(2022-03-25 현재 1년) 동안 이용하지 않는 경우에는 이용자의 개인정보를 해당 기간 경과 후 즉시 파기하거나 다른 이용자의 개인정보와 분리하여 별도로 저장, 관리해야 한다. 

다만, 법 제39조의6제1항 본문에 따른 기간(법 제39조의6제1항 단서에 따라 이용자의 요청에 따라 달리 정한 경우에는 그 기간을 말한다)이 경과한 경우로서 다른 법령에 따라 이용자의 개인정보를 보존해야 하는 경우에는 다른 법령에서 정한 보존기간이 경과할 때까지 다른 이용자의 개인정보와 분리하여 별도로 저장, 관리해야 한다.
```

`배경` : 개인정보 보호법에 따라 1년간 로그인 기록이 없는 회원들에 한해 휴면처리를 해야한다.

`해야할 일` : 1년 동안 로그인을 하지않은 회원에 한해 휴면 회원으로 전환하고, 휴면 회원 전환에 따른 메일 안내를 할 것이다.

배치의 특징 :

- 휴면 회원 전환 시간이 누구는 12시, 누군 15시, 누군 20시보다는
  일괄적으로 같은 시간대에 처리되어야한다.
    - 회원이 1, 2명이 아닌.. 100명, 1000명이 될 수 있다면? →  대용량처리
    - 일괄 처리

## 배치 처리를 위한 기술

- Celery : Python 기반의 분산 비동기 작업을 담당할 수 있는 기술 (주로 MQ와 같이 쓰임)
- Airflow : Python 기반의 워크플로우(일련의 작업) 자동화와 스케줄링에 사용
- Spring Batch : Java를 기반의 Spring 프레임워크의 일부이며, 대량의 데이터 변환 및 처리, 정기적인 데이터 마이그레이션, 보고서 생성 등의 일괄 처리 작업에 적합