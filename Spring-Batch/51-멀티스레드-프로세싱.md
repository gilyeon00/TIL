# 멀티 스레드 프로세싱

## 단일 스레드 vs 멀티 스레드

- 프로세스 내 특정 작업을 처리하는 스레드가 하나일 경우, 단일 스레드 / 여러 개일 경우, 멀티 스레드
  ![1](https://github.com/gilyeon00/TIL/assets/52391627/ded76604-1a10-4580-a0be-1e42852cd6fb)


## 📌 **단일 스레드**

- Spring Application 을 실행하면, 하나의 프로그램이 실행되니 ➡️ 하나의 프로세스가 생성된다.
    - 1 프로세스는 N 개의 스레드를 가질 수있다.
- 단일 스레드(= 메인 스레드) 만 사용하기 때문에, 우리가 **설정한 작업들을 순차적으로 실행**한다.

## 📌 **멀티 스레드**

- 메인 스레드 이외의 스레드를 생성하면, 해당 스레드에게 각각의 작업을 할당해서 **작업들을 병렬적으로 처리 할 수 있는 구조**
- 복잡한 처리나 대용량 데이터를 다루는 작업일 경우, 전체 소요 시간 및 성능상의 이점을 가져오기 위해 선택
- 데이터 동기화 이슈가 존재하기 때문에 최대한 고려해서 결정해야한다.
    - 여러 스레드가 동시적으로 어떤 공유 데이터에 접근해서 데이터를 변경한다면, 동기화 이슈가 발생할 수 있음
      ➡️ 데이터가 훼손되지않는 스레드의 안전함이 고려되어야한다.

## 멀티 프로세싱 기본 개념

- Step 의 RepeatTemplate 를 통해서 반복적으로 Tasklet 을 실행시키는 구조
- 우리가(개발자) 직접 스레드를 생성하는 것이 아니라, 스레드 개수를 지정해주면 TaskExecutor 클래스에서 ThreadPool 을 통해 스레드들을 생성하고 관리한다.
    - 만약 스레드가 본인 할 일을 다했다면 ? 소멸되는 것이 아닌, ThreadPool 에 남아있는다. (실행 다 하면 소비되는 개념의 방법도 있긴함)

![2](https://github.com/gilyeon00/TIL/assets/52391627/c9bc002d-f363-4d4d-abe4-9fdb69304d80)